%include agda.fmt


%%%%%%%%
% basic elements

%subst keyword a = "\keyword{" a "}"
%subst conid a = "\identifier{" a "}"
%subst varid a = "\identifier{" a "}"
%format { = "\{"
%format } = "\}"
%format λ = "\lambda"
%format case = "\{"
%format endcase = "\}"
%format mapsto = "\mapsto"
%format (lambda(x)) = "\lambda\," x "\," mapsto "\!"
%format sep = "\kern.14em;"
%format inferred = ".\kern.25pt" _
%format := = "{\raisebox{.08pt}{$\mathop:$}\shorteq}"
%format (proofterm(t)) = "\proofterm{" t "}"

%format syntax = "\keyword{syntax}"
%format constructor = "\keyword{constructor}"
%format indexfirst = "\keyword{indexfirst}"
%format offers = "\ni"
%format noffers = "\mathrel{\rlap{\kern-.06em$\not$}{\ni}}"
%format or = "\kern.475em|"

%format Set = "\constructor{Set}"
%format Set₁ = "\constructor{Set_1}"

%format 0 = "\mathrm 0"
%format 1 = "\mathrm 1"
%format 2 = "\mathrm 2"
%format 3 = "\mathrm 3"
%format 4 = "\mathrm 4"
%format 5 = "\mathrm 5"

%format ₀ = "_{\mathrm 0}"
%format ₁ = "_{\mathrm 1}"

%format (highlight(x)) = "\highlight{" x "}"
%format (Highlight(x)) = "\Highlight{" x "}"

%format (goal(t)(i)) = "\highlight{\{\," t "\,\}_{" i "}}"
%format proofs-of-laws = "\highlight{\text{\color[gray]{.45}proofs of laws}}"


%%%%%%%%
% arrows

%format ≡ = "\kern-.1em\equiv\kern-.1em"
%format _≡_ = _ "\kern\underscorespace{\equiv}" _
%format ≅ = "\mathrel{\cong}"
%format _≅_ = _ "\kern\underscorespace{" ≅ "}" _
%format ≐ = "\doteq"
%format _≐_ = _ "\kern\underscorespace{" ≐ "}" _
%format ≊ = "\kern-.1em\approxeq\kern-.1em"
%format _≊_ = _ "\kern\underscorespace{\approxeq}" _
%format ≊' = "\kern-.1em\mathrel{\dot\approxeq}\kern-.1em"
%format _≊'_ = _ "\kern\underscorespace{\dot\approxeq}" _
%format ⇉ = "{\rightrightarrows}"
%format _⇉_ = _ "\kern\underscorespace{" ⇉ "}" _
%format ≈ = "\kern-.1em\approx\kern-.1em"
%format _≈_ = _ "\kern\underscorespace{\approx}" _
%format ≈C = "\kern-.1em\approx_C\kern-.1em"
%format ≈D = "\kern-.1em\approx_D\kern-.1em"
%format ≈S = "\kern-.1em\approx_S\kern-.1em"


%%%%%%%%
% basic types

%format _∘_ = _ "{" ∘ "}\kern-\underscorespace" _
%format refl = "\constructor{refl}"
%format refl' = "\identifier{refl}"
%format ⊤ = "\top"
%format tt = "{\kern.125em\vrule height .85ex depth -.25ex width .5ex\kern.125em}"
%format Σ = "\Sigma"
%format (Σ'(t)) = Σ "\kern\binderspace\binderbracketl\," t "\,\binderbracketr\kern\binderskip"
%format pair = _ "\kern.1em,\kern-.1em" _
%format proj₁ = "\constructor{outl}"
%format proj₂ = "\constructor{outr}"
%format × = "\!\times\!"
%format inj₁ = "\constructor{inl}"
%format inj₂ = "\constructor{inr}"
%format ▿ =  "\triangledown"
%format ▵ =  "\rotatebox[origin=c]{180}{$" ▿ "$}"
%format Iso = "\constructor{Iso}"
%format Iso.to = Iso "\recordmember" to
%format Iso.from = Iso "\recordmember" from
%format π₁ = proj₁
%format π₂ = proj₂
%format und-fromEq = "\identifier{und\text-fromEq}"
%format Setoid = "\constructor{Setoid}"
%format Setoid.Carrier = Setoid "\recordmember" Carrier
%format Setoid._≈_ = Setoid "\recordmember" _≈_
%format Level = "\constructor{Level}"
%format Graph = "\constructor{Graph}"
%format Category = "\constructor{Category}"
%format ==> = "{\Rightarrow}"
%format =C=> = "{\Rightarrow_C}"
%format =D=> = "{\Rightarrow_D}"
%format _==>_ = _ "{" ==> "}\kern-\underscorespace" _
%format · = "{\cdot}"
%format _·_ = _ "\kern\underscorespace{" · "}" _
%format ·C = "{\cdot_C}"
%format ·D = "{\cdot_D}"
%format id-l = "\identifier{id\text-l}"
%format id-r = "\identifier{id\text-r}"
%format cong-l = "\identifier{cong\text-l}"
%format cong-r = "\identifier{cong\text-r}"
%format Functor = "\constructor{Functor}"
%format equiv-preserving = "\identifier{equiv\text-preserving}"
%format id-preserving = "\identifier{id\text-preserving}"
%format comp-preserving = "\identifier{comp\text-preserving}"
%format Iso = "\constructor{Iso}"
%format from-to-inverse = "\identifier{from\text-to\text-inverse}"
%format to-from-inverse = "\identifier{to\text-from\text-inverse}"
%format terminal-iso = "\identifier{terminal\text-iso}"
%format Span = "\constructor{Span}"
%format span = "\constructor{span}"
%format Span.M = Span "\recordmember" M
%format Span.l = Span "\recordmember" l
%format Span.r = Span "\recordmember" r
%format triangle-l = "\identifier{triangle\text-l}"
%format triangle-r = "\identifier{triangle\text-r}"
%format SpanMorphism = "\constructor{SpanMorphism}"
%format spanMorphism = "\constructor{spanMorphism}"
%format SpanMorphism.m = SpanMorphism "\recordmember" m
%format Slice = "\constructor{Slice}"
%format slice = "\constructor{slice}"
%format Slice.T = Slice "\recordmember" T
%format Slice.s = Slice "\recordmember" s
%format SliceMorphism = "\constructor{SliceMorphism}"
%format sliceMorphism = "\constructor{sliceMorphism}"
%format SliceMorphism.m = SliceMorphism "\recordmember" m
%format SliceMorphism.triangle = SliceMorphism "\recordmember" triangle


%%%%%%%%
% refinements

%format Refinement = "\constructor{Refinement}"
%format Refinement.P = Refinement "\recordmember" P
%format Refinement.i = Refinement "\recordmember" i
%format Refinement.forget = Refinement "\recordmember" forget
%format Refinement' = "\constructor{Refinement}^\prime"
%format Refinement'.P = Refinement "\rlap{$^\prime$}\kern.5pt\recordmember\kern.5pt" P
%format Refinement'.forget = Refinement "\rlap{$^\prime$}\kern.5pt\recordmember\kern.5pt" forget
%format Refinement'.p = Refinement "\rlap{$^\prime$}\kern.5pt\recordmember\kern.5pt" p
%format forget-iso = "\identifier{forget\text-iso}"
%format FRefinement = "\constructor{FRefinement}"

%format Nat-List = "\identifier{Nat\text-List}"

%format Upgrade = "\constructor{Upgrade}"
%format Upgrade.P = Upgrade "\recordmember" P
%format Upgrade.C = Upgrade "\recordmember" C
%format Upgrade.u = Upgrade "\recordmember" u
%format Upgrade.c = Upgrade "\recordmember" c
%format _⇀_ = _ "{\rightharpoonup}\kern-\underscorespace" _
%format (newforall(t)) = "\forall^+\kern-.5\binderspace\binderbracketl\," t "\,\binderbracketr\kern\binderskip"
%format (newforall'(t)) = "\forall^+\kern-.5\binderspace\binderbracketl\kern-2.5pt\binderbracketl\," t "\,\binderbracketr\kern-2.5pt\binderbracketr\kern\binderskip"
%format (fixedforall(t)) = "\forall\kern.5\binderspace\binderbracketl\," t "\,\binderbracketr\kern\binderskip"
%format (fixedforall'(t)) = "\forall\kern.5\binderspace\binderbracketl\kern-2.5pt\binderbracketl\," t "\,\binderbracketr\kern-2.5pt\binderbracketr\kern\binderskip"

%format id-FSwap = "\identifier{id\text-FSwap}"
%format ⊗-FSwap = "\identifier{{\otimes}\text-FSwap}"

%format InvImage = "\constructor{InvImage}"
%format ok = "\constructor{ok}"

%%%%%%%%
% descriptions and ornaments

%format RDesc = "\constructor{RDesc}"
%format ṿ = "\constructor{v}"
%format σ = "\upsigma"
%format (σ'(t)) = σ "\kern\binderspace\binderbracketl\," t "\,\binderbracketr\kern\binderskip"
%format (σ''(t)) = σ "\kern\binderspace\binderbracketl\," t "\,\binderbracketr"
%format Ṗ = "\mathbb P"
%format Ṗ-map = "\identifier{" Ṗ "\text-map}"
%format ⟦ = "[\kern-.18em["
%format ⟧ = "]\kern-.18em]"
%format ⟦_⟧ = ⟦ _ "\kern.08em" ⟧
%format Desc = "\constructor{Desc}"
%format Ḟ = "\mathbb F"
%format μ = "\mu"
%format con = "\constructor{con}"
%format mapFold-Ṗ = "\identifier{mapFold\text-" Ṗ "}"

%format Ė = "\mathbb E"
%format ROrn = "\constructor{ROrn}"
%format Orn = "\constructor{Orn}"
%format Δ = "\Delta"
%format (Δ'(t)) = Δ "\kern\binderspace\binderbracketl\," t "\,\binderbracketr\kern\binderskip"
%format (Δ''(t)) = Δ "\kern\binderspace\binderbracketl\," t "\,\binderbracketr"
%format ∇ = "\rotatebox[origin=c]{180}{$" Δ "$}"
%format (∇'(t)) = ∇ "\kern\binderspace\binderbracketl\," t "\,\binderbracketr\kern\binderskip"
%format (∇''(t)) = ∇ "\kern\binderspace\binderbracketl\," t "\,\binderbracketr"
%format ROrnDesc = "\constructor{ROrnDesc}"
%format OrnDesc = "\constructor{OrnDesc}"
%format und-Ṗ = "\identifier{und\text-" Ṗ "}"
%format toEq-Ṗ = "\identifier{toEq\text-" Ṗ "}"
%format ⌊ = "\lfloor\kern-.2em"
%format ⌋ = "\kern-.2em\rfloor"
%format ⌈ = "\lceil\kern-.2em"
%format ⌉ = "\kern-.2em\rceil"
%format ⌋T = ⌋ "_{\kern-.5ptT}"
%format ⌊_⌋ = "\lfloor" _ "\kern\underscorespace" "\rfloor"
%format TDesc = "\constructor{TDesc}"
%format _⊕_ = _ ⊕ "\kern-\underscorespace" _
%format ⌊_⌋T = ⌊_⌋ "_{\kern-.5ptT}"
%format _⊗_ = _ "{" ⊗ "}\kern-\underscorespace" _
%format pc-Ė = "\identifier{pc\text-" Ė "}"
%format pcROD-double∇ = "\identifier{pcROD\text-double" ∇ "}"
%format diffOrn-l = "\identifier{diffOrn\text-l}"
%format diffOrn-r = "\identifier{diffOrn\text-r}"
%format diff-Ė-l = "\identifier{diff\text-" Ė "\text-l}"
%format diffROrn-l = "\identifier{diffROrn\text-l}"
%format diffROrn-l-double∇ = "\identifier{diffROrn\text-l\text-double" ∇ "}"
%format _⊙_ = _ "{" ⊙ "}\kern-\underscorespace" _
%format Ė-refl = "\identifier{" Ė "\text-refl}"
%format Ė-trans = "\identifier{" Ė "\text-trans}"

%format OptP = "\constructor{OptP}"
%format RSem' = "\identifier{RSem}"

%format OrnEq-forget = "\identifier{" OrnEq "\text-forget}"

%format Swap = "\constructor{Swap}"
%format Swap.Q = Swap "\recordmember" Q
%format Swap.i = Swap "\recordmember" i
%format FSwap = "\constructor{FSwap}"
%format ⊗-FSwap = "\identifier{{\otimes}\text-FSwap}"

%format Fun = "\categorical{F}{un}"
%format Fun-graph = "\identifier{" Fun "\text-graph}"
%format Com = "\categorical{}{Com}"
%format FamF = "\categorical{}{FamF}"
%format Fam = "\categorical{F}{\kern-.6pt am}"
%format Ōrn = "\categorical{O}{rn}"
%format FRef = "\categorical{F}{ref}"
%format FRefF = "\categorical{}{FRefF}"
%format FRefC = "\categorical{}{FRefC}"
%format Ind = "\categorical{}{Ind}"
%format RSem = "\categorical{}{RSem}"

%%%%%%%%
% relations

%format ℘ = "{\mathcal P}"
%format (Power t) = ℘ t
%format _↝_ = _ "{" ↝ "}\kern-\underscorespace" _
%format Ṙ = "\mathbb R"
%format _>>=_ = _ "{" >>= "}\kern-\underscorespace" _
%format <$> = "\mathop{\raisebox{2.4pt}{\scalebox{1}[.4]{$\langle$}}\$\raisebox{2.4pt}{\scalebox{1}[.4]{$\rangle$}}}"
%format _<$> = _ "{" <$> "}"
%format <$>² = "\mathop{{" <$> "}\kern-.5pt^2}"
%format _<$>² = _ "{" <$>² "}"
%format • = "\mathop{\raisebox{2pt}{\scalebox{0.5}{$\bullet$}}}"
%format _•_ = _ "\kern\underscorespace{" • "}\kern.8\underscorespace" _
%format _∩_ = _ "\kern\underscorespace{" ∩ "}" _
%format º = "\kern-.1em^\circ"
%format _º = _ "{^\circ}"
%format ⊆ = "\mathrel\subseteq"
%format _⊆_ = _ "\kern\underscorespace{\subseteq}" _
%format ⊇ = "\mathrel\supseteq"
%format _⊇_ = _ "\kern\underscorespace{\supseteq}" _
%format ≃ = "\mathrel\simeq"
%format _≃_ = _ "\kern\underscorespace{\simeq}" _
%format foldR = "(\kern-2.6pt[" _ "\kern.08em]\kern-2.6pt)"
%format (cata(x)) = "(\kern-2.6pt[\," x "\,]\kern-2.6pt)"
%format fun-preserves-fold = "\identifier{fun\text-preserves\text-fold}"
%format Λ = "\Lambda"
%format •Λ = • Λ
%format α = "\alpha"
%format min_•Λ_ = min _ •Λ _

%format AlgList = "\constructor{AlgList}"
%format AlgListP = "\constructor{AlgListP}"
%format algOD-fusion-⊆ = "\identifier{algOD\text-fusion\text-{\subseteq}}"
%format algOD-fusion-⊇ = "\identifier{algOD\text-fusion\text-{\supseteq}}"
%format BVec = "\constructor{BVec}"
%format foldl-alg = "\identifier{foldl\text-alg}"


%%%%%%%%
% datatypes

%format Nat = "\constructor{Nat}"
%format zero = "\constructor{zero}"
%format suc = "\constructor{suc}"
%format ≤-trans = "\identifier{{" ≤ "}\text-trans}"
%format Fin = "\constructor{Fin}"
%format List = "\constructor{List}"
%format ListS = "\constructor{ListS}"
%format nil = "\constructor{nil}"
%format cons = "\constructor{cons}"
%format [] = "[\kern1pt]"
%format _∷_ = _ "\kern\underscorespace" ∷ _
%format ++ = "{+\kern-7pt+}"
%format _++_ = _ "{" ++ "}\kern-\underscorespace" _
%format ListTag = "\constructor{ListTag}"
%format `nil = "`" nil
%format `cons = "`" cons
%format NatD-ListD = "\identifier{NatD\text-ListD}"
%format ListD-VecD = "\identifier{ListD\text-VecD}"
%format Vec = "\constructor{Vec}"
%format Length = "\constructor{Length}"
%format Length-FSwap = "\identifier{Length\text-FSwap}"
%format Square = "\constructor{Square}"
%format OrdList = "\constructor{OrdList}"
%format ≤A = "{\leq}_A\kern-\underscorespace"
%format _≤A_ = _ ≤A _
%format Ordered = "\constructor{Ordered}"
%format OrdVec = "\constructor{OrdVec}"
%format OrderedLength = "\constructor{OrderedLength}"
%format Dec = "\constructor{Dec}"
%format yes = "\constructor{yes}"
%format no = "\constructor{no}"
%format _≤_ = _ "{\leq}\kern-\underscorespace" _
%format ≤-refl = "\identifier{{\leq}\text-refl}"
%format ≤? = "{\leq}_?"
%format _≤?_ = _ ≤? _
%format ≰-invert = "\identifier{{\nleq}\text-invert}"
%format ord-xs = "\identifier{ord\text-xs}"
%format len-xs = "\identifier{len\text-xs}"
%format b'≤x = "\identifier{" b' "\kern-\underscorespace{" ≤ "}x}"
%format BTree = "\constructor{BTree}"
%format Bin = "\constructor{Bin}"
%format one = "\constructor{one}"
%format Boolean = "\constructor{Boolean}"
%format BHeap = "\constructor{BHeap}"
%format BHeap' = "\constructor{BHeap}^\prime"
%format incr-insT-coherence = "\identifier{incr\text-insT\text-coherence}"
%format BinTag = "\constructor{BinTag}"
%format `zero = "`" zero
%format `one = "`" one
%format Tree = "\constructor{Tree}"
%format node = "\constructor{node}"
%format TreeTag = "\constructor{TreeTag}"
%format `node = "`" node
%format LTree = "\constructor{LTree}"
%format r≤l = "\identifier{r{" ≤ "}l}"
%format Heap = "\constructor{Heap}"
%format b≤x = "\identifier{b{" ≤ "}x}"
%format Heap' = "\constructor{Heap}^\prime"
%format b'≤b = "\identifier{" b' "\kern-\underscorespace{" ≤ "}b}"
%format ITree = "\constructor{ITree}"
%format ITreeD-HeapD = "\identifier{ITreeD\text-HeapD}"
%format LHeap = "\constructor{LHeap}"
%format WLTree = "\constructor{WLTree}"
%format n≡l+r = "\identifier{n{\equiv}l{+}r}"
%format WLHeap = "\constructor{WLHeap}"
%format b₀ = b ₀
%format b₁ = b ₁
%format r₀ = r ₀
%format r₁ = r ₁
%format h₀ = h ₀
%format h₁ = h ₁
%format t₀ = t ₀
%format t₁ = t ₁
%format u₀ = u ₀
%format u₁ = u ₁
%format x₀ = x ₀
%format x₁ = x ₁
%format l₀ = l ₀
%format l₁ = l ₁
%format n₀ = n ₀
%format n₁ = n ₁
%format r₀≤r₁ = "\proofterm{" r₀ "{\leq}" r₁ "}"
%format r₀≰r₁ = "\proofterm{" r₀ "{\nleq}" r₁ "}"
%format b≤b₀ = "\proofterm{" b "{\leq}" b₀ "}"
%format b≤b₁ = "\proofterm{" b "{\leq}" b₁ "}"
%format b₀≤x₀ = "\proofterm{" b₀ "{\leq}" x₀ "}"
%format b₁≤x₁ = "\proofterm{" b₁ "{\leq}" x₁ "}"
%format r₀≤l₀ = "\proofterm{" r₀ "{\leq}" l₀ "}"
%format r₁≤l₁ = "\proofterm{" r₁ "{\leq}" l₁ "}"
%format x₀≤x₁ = "\proofterm{" x₀ "{\leq}" x₁ "}"
%format x₀≰x₁ = "\proofterm{" x₀ "{\nleq}" x₁ "}"
%format pc-square = "\identifier{pc\text-square}"
%format length-alg = "\identifier{length\text-alg}"
%format Coin = "\constructor{Coin}"
%format onep = "\constructor{1p}"
%format twop = "\constructor{2p}"
%format fivep = "\constructor{5p}"
%format ≤C = "\!\mathrel{\leq_C}\!"
%format _≤C_ = _ "{≤_C}\kern-\underscorespace" _
%format CoinBag = "\constructor{CoinBag}"
%format total-value-alg = "\identifier{total\text-value\text-alg}"
%format total-value = "\identifier{total\text-value}"
%format size-alg = "\identifier{size\text-alg}"
%format min-coin-change = "\identifier{min\text-coin\text-change}"
%format greedy-lemma = "\identifier{greedy\text-lemma}"
%format producer-iso = "\identifier{producer\text-iso}"
%format consumer-iso = "\identifier{consumer\text-iso}"
%format streaming-lemma = "\identifier{streaming\text-lemma}"
%format streaming-condition = "\identifier{streaming\text-condition}"
%format nothing = "\constructor{nothing}"
%format next = "\constructor{next}"